<template>
  <div class="stage-view">
    <!-- Scrollspy Navigation -->
    <nav class="scrollspy-nav">
      <ul class="nav-list">
        <li>
          <a
            @click="scrollToSection('contexte')"
            :class="{ active: activeSection === 'contexte' }"
            >üéØ Contexte</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('role')"
            :class="{ active: activeSection === 'role' }"
            >üë®‚Äçüíª Mon r√¥le (UE4 - UE5 - UE6)</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('organisation')"
            :class="{ active: activeSection === 'organisation' }"
            >‚è±Ô∏è Organisation</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('technologies')"
            :class="{ active: activeSection === 'technologies' }"
            >üõ†Ô∏è Technologies (UE1)</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('fonctionnalites')"
            :class="{ active: activeSection === 'fonctionnalites' }"
            >‚ö° Fonctionnalit√©s</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('defis')"
            :class="{ active: activeSection === 'defis' }"
            >üîß D√©fis techniques</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('securite')"
            :class="{ active: activeSection === 'securite' }"
            >üõ°Ô∏è S√©curit√© (UE4)</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('avancement')"
            :class="{ active: activeSection === 'avancement' }"
            >üöÄ √âtat d'avancement</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('apprentissages')"
            :class="{ active: activeSection === 'apprentissages' }"
            >üéì Apprentissages</a
          >
        </li>
        <li>
          <a
            @click="scrollToSection('comp√©tences')"
            :class="{ active: activeSection === 'comp√©tences' }"
            >üß† Comp√©tences cibl√©es</a
          >
        </li>
      </ul>
    </nav>

    <!-- 1. Contexte et objectifs -->
    <section id="contexte" class="section">
      <h2>üéØ Contexte et objectifs du projet</h2>
      <p>
        J'ai eu l'opportunit√© de travailler en tant que stagiaire web full-stack
        au Learning Centre Claude Oytana √† Besan√ßon, France, d'avril 2025 √† mai
        2025. Ma mission √©tait de cr√©er une application mobile appel√©e ¬´ Euphron
        ¬ª, permettant aux √©tudiants de l'Universit√© de Franche-Comt√© de donner
        ou de prendre du mat√©riel sportif d'occasion sur un syst√®me de don.
      </p>
      <img src="../assets/Euphron.svg" alt="Logo Euphron" class="logo" />

      <p>
        La r√©alisation de cette application a √©t√© propos√©e par des √©tudiants en
        STAPS, √† la suite d'une √©tude de march√© portant sur l'acc√®s au mat√©riel
        sportif dans leur cursus. Cette √©tude a r√©v√©l√© que, si certaines √©coles
        parviennent √† fournir le mat√©riel n√©cessaire √† leurs √©tudiants, dans de
        nombreuses autres, ce sont les √©tudiants eux-m√™mes qui doivent financer
        leur √©quipement.
      </p>

      <p>
        Le projet s'est d√©velopp√© en parall√®le d'un √©v√©nement existant appel√©
        <strong>"Troc Party sport"</strong> organis√© par la biblioth√®que
        universitaire, o√π un troc √©tait organis√© pendant une journ√©e. L'id√©e
        √©tait de fusionner ces deux initiatives en une seule application
        num√©rique permanente.
      </p>

      <div class="objectives">
        <p>L'objectif √©tait triple :</p>
        <ul>
          <li>
            <strong>Promouvoir l'acc√®s au sport</strong> pour tous les √©tudiants
            en Franche-Comt√©
          </li>
          <li>
            <strong>Encourager la solidarit√© √©tudiante</strong> en facilitant
            l'√©change de mat√©riel
          </li>
          <li>
            <strong>Favoriser la r√©utilisation</strong> dans une d√©marche
            √©coresponsable
          </li>
        </ul>
        <p class="constraint">
          <strong>Contrainte principale :</strong> Aucun gain mon√©taire autoris√©
          - tout devait √™tre gratuit, bas√© sur la solidarit√© √©tudiante.
        </p>
      </div>
    </section>

    <!-- 2. Mon r√¥le et responsabilit√©s -->
    <section id="role" class="section">
      <h2>
        üë®‚Äçüíª Mon r√¥le et responsabilit√©s (<a
          @click="scrollToSection('transverse')"
          class="transverse-link"
          >UE4 - UE5 - UE6</a
        >)
      </h2>
      <p>
        J'ai √©t√© charg√© de r√©aliser
        <strong>l'enti√®ret√© de l'application web</strong>
        (compatible ordinateur et mobile) en totale autonomie. Mes
        responsabilit√©s incluaient :
      </p>
      <ul>
        <li>
          Conception du visuel sur <strong>Figma</strong> pour validation client
        </li>
        <li>D√©veloppement <strong>frontend</strong> (interface utilisateur)</li>
        <li>
          D√©veloppement <strong>backend/serveur</strong> (API et logique m√©tier)
        </li>
        <li>Conception et gestion de la <strong>base de donn√©es</strong></li>
        <li>Collaboration avec la <strong>D</strong>irection des <strong>S</strong>yst√®mes d'<strong>I</strong>nformation et du <strong>N</strong>um√©rique (<strong>DSIN</strong>) pour l'h√©bergement futur</li>
      </ul>
      <p>
        Cette autonomie m'a permis de prendre des initiatives tout en respectant
        les besoins clients, m√™me lors de changements de sp√©cifications.
      </p>
    </section>

    <!-- 3. Organisation du projet -->
    <section id="organisation" class="section">
      <h2>‚è±Ô∏è Organisation du projet (8 semaines)</h2>
      <div class="timeline">
        <div class="timeline-item">
          <span class="week">Semaines 1-2</span>
          <span class="task"
            >Pr√©paration du visuel et d√©finition des fonctionnalit√©s</span
          >
        </div>
        <div class="timeline-item">
          <span class="week">Semaine 3</span>
          <span class="task"
            >Recherche de technologies et r√©unions de validation</span
          >
        </div>
        <div class="timeline-item">
          <span class="week">Semaines 4-8</span>
          <span class="task"
            >D√©veloppement (frontend, backend, base de donn√©es)</span
          >
        </div>
      </div>

      <p>
        <strong>M√©thodologie :</strong> R√©unions hebdomadaires avec l'√©quipe de
        la BU et mon tuteur de stage. Utilisation de <strong>Git</strong> pour
        le versioning et <strong>Trello</strong> pour la gestion des t√¢ches.
      </p>
    </section>

    <!-- 4. Choix techniques et architecture -->
    <section id="technologies" class="section">
      <h2>
        üõ†Ô∏è Choix techniques et architecture (<a
          @click="scrollToSection('ue1')"
          class="ue1-link"
          >UE1</a
        >)
      </h2>

      <div class="tech-stack">
        <div class="tech-category">
          <h3>Frontend</h3>
          <ul>
            <li>
              <strong>Vue.js 3</strong> - Framework principal (Composition API,
              script setup)
            </li>
            <li>
              <strong>Quasar Framework</strong> - UI framework pour la
              compatibilit√© mobile
            </li>
            <li>
              <strong>Pinia</strong> - Gestion d'√©tat (rempla√ßant de Vuex)
            </li>
            <li>
              <strong>Socket.io-client</strong> - Communication temps r√©el
            </li>
            <li>
              <strong>Capacitor</strong> - Transformation en app mobile native
            </li>
            <li><strong>Axios</strong> - Requ√™tes HTTP</li>
          </ul>
        </div>

        <div class="tech-category">
          <h3>Backend</h3>
          <ul>
            <li>
              <strong>Node.js</strong> - Environnement d'ex√©cution JavaScript
            </li>
            <li><strong>Express.js</strong> - Framework web</li>
            <li><strong>MySQL</strong> - Base de donn√©es relationnelle</li>
            <li>
              <strong>Socket.io</strong> - WebSocket pour le chat temps r√©el
            </li>
            <li>
              <strong>Architecture MVC</strong> - Models, Services, Controllers,
              Routes
            </li>
          </ul>
        </div>
      </div>

      <p>
        <strong>Justification des choix :</strong> J'ai privil√©gi√© Vue.js car je
        ma√Ætrise bien ce framework, contrairement √† Angular ou React. Quasar
        √©tait le choix id√©al pour la compatibilit√© mobile native, r√©pondant
        parfaitement aux exigences du projet.
      </p>
    </section>

    <!-- 5. Fonctionnalit√©s d√©velopp√©es -->
    <section id="fonctionnalites" class="section">
      <h2>‚ö° Fonctionnalit√©s d√©velopp√©es</h2>

      <div class="features-grid">
        <div class="feature-category">
          <h3>Gestion utilisateur</h3>
          <ul>
            <li>Inscription / Connexion</li>
            <li>Modification du profil</li>
            <li>Syst√®me d'authentification</li>
          </ul>
        </div>

        <div class="feature-category">
          <h3>Gestion des articles</h3>
          <ul>
            <li>Ajout d'articles sportifs</li>
            <li>Modification / Suppression</li>
            <li>Syst√®me de cat√©gories</li>
          </ul>
        </div>

        <div class="feature-category">
          <h3>Communication</h3>
          <ul>
            <li>Chat en temps r√©el (Socket.IO)</li>
            <li>Messagerie entre utilisateurs</li>
          </ul>
        </div>

        <div class="feature-category">
          <h3>Administration</h3>
          <ul>
            <li>Gestion des cat√©gories de sport</li>
            <li>Gestion des comptes utilisateurs</li>
            <li>Mod√©ration du contenu</li>
          </ul>
        </div>
      </div>

      <p class="highlight">
        <strong>Partie la plus enrichissante :</strong> Le d√©veloppement du chat
        en temps r√©el avec Socket.IO √©tait une premi√®re pour moi. La
        documentation excellente m'a permis de comprendre rapidement les
        concepts et d'impl√©menter cette fonctionnalit√© avec succ√®s.
      </p>

      <div class="progress">
        <p>
          <strong>√âtat d'avancement :</strong> 70% des fonctionnalit√©s r√©alis√©es
        </p>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 70%"></div>
        </div>
      </div>
    </section>

    <!-- 6. D√©fis techniques rencontr√©s -->
    <section id="defis" class="section">
      <h2>üîß D√©fis techniques rencontr√©s</h2>

      <div class="challenge">
        <h3>Int√©gration Capacitor</h3>
        <p>
          <strong>Probl√®me :</strong> Pour tester l'application mobile, je
          devais la connecter au serveur local. Malgr√© mes tentatives de
          cr√©ation d'une adresse accessible via le r√©seau local, cette
          int√©gration s'est r√©v√©l√©e probl√©matique.
        </p>
        <p>
          <strong>Solution :</strong> J'ai mis cette partie de c√¥t√© pour me
          concentrer sur le d√©veloppement des fonctionnalit√©s core, tout en
          maintenant la compatibilit√© mobile.
        </p>
      </div>

      <div class="challenge">
        <h3>Tests utilisateurs limit√©s</h3>
        <p>
          Seule une dizaine d'utilisateurs (√©tudiants STAPS et √©quipe BU) ont pu
          tester l'application en raison du manque de peaufinage √† ce stade du
          d√©veloppement.
        </p>
      </div>
    </section>

    <!-- 7. S√©curit√© et bonnes pratiques -->
    <section id="securite" class="section">
      <h2>
        üõ°Ô∏è S√©curit√© et bonnes pratiques (<a
          @click="scrollToSection('ue4')"
          class="ue4-link"
          >UE4</a
        >)
      </h2>
      <p>
        Durant le d√©veloppement, j'ai appris l'importance de la s√©curisation
        contre les injections SQL. J'ai impl√©ment√© une double protection :
      </p>

      <div class="security-method">
        <h3>1. V√©rification frontend (Regex)</h3>
        <img src="../assets/stage/RegexCheck.png" alt="V√©rification Regex" />
        <p class="legend">(Figure 1 - Syst√®me de validation regex)</p>
        <p>
          Cette m√©thode c√¥t√© frontend v√©rifie que l'utilisateur n'essaie pas de
          nuire au fonctionnement de l'application en utilisant une <strong>EX</strong>pression
          <strong>R√âG</strong>uli√®re (<strong>REGEX</strong>). Cette expression v√©rifie que les champs (nom,
          email, t√©l√©phone) ne contiennent pas de caract√®res suspects comme <span class="special-character"> ' "
          ; -- / * </span> , etc. Elle refuse √©galement toute cha√Æne contenant des
          mots-cl√©s SQL classiques (<span class="special-character">SELECT</span>, <span class="special-character">DROP</span>, <span class="special-character">INSERT</span>, etc.). Cependant, le
          contr√¥le c√¥t√© frontend n‚Äôest qu‚Äôun confort pour l'utilisateur. Il est
          imp√©ratif de v√©rifier √©galement c√¥t√© backend, ce qui peut √™tre fait
          gr√¢ce aux requ√™tes pr√©par√©es.
        </p>
      </div>

      <div class="security-method">
        <h3>2. Requ√™tes pr√©par√©es (Backend)</h3>
        <img src="../assets/stage/PreparedQuery.png" alt="Requ√™tes pr√©par√©es" />
        <p class="legend">(Figure 2 - Impl√©mentation des requ√™tes pr√©par√©es)</p>
        <p>
          Les <strong>requ√™tes pr√©par√©es</strong> (ou param√©tr√©es) offrent une
          protection robuste car elles :
        </p>
        <ul>
          <li>Emp√™chent les injections SQL</li>
          <li>Sont support√©es par tous les moteurs SQL modernes</li>
          <li>Constituent la base de tous les ORM modernes</li>
        </ul>
      </div>
    </section>

    <!-- 8. √âtat d'avancement et suite √† donner -->
    <section id="avancement" class="section">
      <h2>üöÄ √âtat d'avancement et suite √† donner</h2>

      <div class="status">
        <h3>Actuellement en d√©veloppement</h3>
        <p>
          L'application n'a pas encore √©t√© mise en production, n√©cessitant
          encore du peaufinage et le d√©veloppement des fonctionnalit√©s
          restantes.
        </p>
      </div>

      <div class="remaining-tasks">
        <h3>Fonctionnalit√©s restantes</h3>
        <ul>
          <li>Gestion compl√®te des articles en tant qu'admin</li>
          <li>Am√©lioration de la gestion utilisateurs (administration)</li>
          <li>Peaufinage du syst√®me de chat en temps r√©el</li>
        </ul>
      </div>

      <div class="proposals">
        <h3>Mes propositions d'am√©lioration</h3>
        <ul>
          <li>
            <strong>Optimisation stockage :</strong> Passage √† deux bases de
            donn√©es si le stockage des images devient probl√©matique (s√©paration
            des donn√©es)
          </li>
          <li>
            <strong>Performance chat :</strong> Migration du chat vers MongoDB
            pour am√©liorer l'efficacit√© des messages temps r√©el
          </li>
        </ul>
      </div>

      <p>
        J'ai laiss√© un document complet "suite √† donner" r√©pertoriant mes
        r√©alisations, les t√¢ches restantes et mes recommandations techniques.
      </p>
    </section>

    <!-- 9. Apprentissages et retour d'exp√©rience -->
    <section id="apprentissages" class="section">
      <h2>üéì Apprentissages et retour d'exp√©rience</h2>

      <div class="learnings">
        <h3>Comp√©tences techniques acquises</h3>
        <ul>
          <li>
            Ma√Ætrise de <strong>Socket.IO</strong> pour la communication temps
            r√©el
          </li>
          <li>
            Approfondissement de la <strong>s√©curit√© web</strong> (injections
            SQL, requ√™tes pr√©par√©es)
          </li>
          <li>
            Exp√©rience compl√®te du <strong>d√©veloppement full-stack</strong>
          </li>
          <li>
            Utilisation de <strong>Quasar</strong> pour le d√©veloppement mobile
          </li>
        </ul>
      </div>

      <div class="learnings">
        <h3>Comp√©tences transversales</h3>
        <ul>
          <li>
            <strong>Autonomie</strong> dans la gestion d'un projet complet
          </li>
          <li>
            <strong>Adaptabilit√©</strong> face aux changements de sp√©cifications
          </li>
          <li><strong>Communication client</strong> et gestion des attentes</li>
          <li>
            <strong>Prise d'initiatives</strong> et propositions d'am√©liorations
          </li>
        </ul>
      </div>

      <div class="reflection">
        <h3>Si c'√©tait √† refaire</h3>
        <p>
          J'aurais pr√©f√©r√© travailler en √©quipe pour plus d'efficacit√©. En √©tant
          seul, je n'ai pas pu r√©aliser autant de fonctionnalit√©s que souhait√©,
          bien que cela m'ait permis de d√©velopper mon autonomie et ma capacit√©
          √† g√©rer un projet dans sa globalit√©.
        </p>
      </div>
    </section>

    <!-- 10. Comp√©tences cibl√©es -->
    <section id="comp√©tences" class="section">
      <h2>üß† Comp√©tences cibl√©es</h2>
      <p>
        Durant ce stage, j'ai cibl√© sp√©cifiquement plusieurs comp√©tences du
        <a
          href="https://www.enseignementsup-recherche.gouv.fr/sites/default/files/annexe-2-licence-professionnelle-bachelor-universitaire-de-technologie-informatique-29016.pdf#page=17"
          target="_blank"
          class="official-link"
        >
          r√©f√©rentiel officiel du B.U.T. Informatique</a
        >
        en fonction des missions qui m'ont √©t√© confi√©es :
      </p>

      <div class="competences-grid">
        <div class="competence-card ue1" id="ue1">
          <div class="competence-header">
            <span class="ue-badge">UE1</span>
            <h3>R√©aliser</h3>
          </div>
          <div class="competence-title">
            <span>√âlaborer une application informatique</span>
          </div>
          <div class="competence-details">
            <p><strong>Mise en application :</strong></p>
            <ul>
              <li>Conception compl√®te de l'application Euphron sur Figma</li>
              <li>D√©veloppement frontend avec Vue.js et Quasar</li>
              <li>Architecture backend avec Node.js et Express</li>
              <li>Int√©gration de fonctionnalit√©s temps r√©el (Socket.IO)</li>
            </ul>
          </div>
        </div>

        <div class="competence-card ue4" id="ue4">
          <div class="competence-header">
            <span class="ue-badge">UE4</span>
            <h3>Administrer</h3>
          </div>
          <div class="competence-title"><span>S√©curiser des donn√©es</span></div>
          <div class="competence-details">
            <p><strong>Mise en application :</strong></p>
            <ul>
              <li>
                Impl√©mentation de requ√™tes pr√©par√©es contre les injections SQL
              </li>
              <li>Validation des donn√©es c√¥t√© frontend (regex)</li>
              <li>Syst√®me d'authentification s√©curis√©</li>
            </ul>
          </div>
        </div>

        <div class="competence-card ue6" id="ue6">
          <div class="competence-header">
            <span class="ue-badge">UE6</span>
            <h3>Collaborer</h3>
          </div>
          <div class="competence-title">
            <span>√âlaborer, g√©rer et transmettre de l'information</span>
          </div>
          <div class="competence-details">
            <p><strong>Mise en application :</strong></p>
            <ul>
              <li>Communication r√©guli√®re avec l'√©quipe de la BU</li>
              <li>Pr√©sentation des avancements lors des r√©unions</li>
              <li>R√©daction du document "suite √† donner"</li>
            </ul>
          </div>
        </div>

        <div class="competence-card transverse" id="transverse">
          <div class="competence-header">
            <span class="ue-badge multi">UE4-5-6</span>
            <h3>Transverse</h3>
          </div>
          <div class="competence-title">
            <span>Lancer un nouveau projet</span>
          </div>
          <div class="competence-details">
            <p><strong>Mise en application :</strong></p>
            <ul>
              <li>Prise d'initiative pour l'architecture technique</li>
              <li>Gestion autonome du planning et des priorit√©s</li>
              <li>Adaptation aux changements de sp√©cifications</li>
              <li>Propositions d'am√©liorations futures</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="competences-synthesis">
        <h3>Synth√®se des apprentissages</h3>
        <p>
          Ce stage m'a permis de mettre en pratique de mani√®re concr√®te les
          comp√©tences th√©oriques et pratiques acquises durant ma formation. L'autonomie
          compl√®te sur le projet m'a particuli√®rement aid√© √† d√©velopper les
          aspects transversaux comme la gestion de projet et la communication
          client, tout en approfondissant mes comp√©tences techniques en
          d√©veloppement full-stack et en s√©curit√©.
        </p>
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from "vue";

const activeSection = ref("contexte");

// Fonction pour faire d√©filer vers une section avec offset
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId);
  if (element) {
    const navbarHeight = 100;
    const elementPosition =
      element.getBoundingClientRect().top + window.pageYOffset;
    const offsetPosition = elementPosition - navbarHeight;

    window.scrollTo({
      top: offsetPosition,
      behavior: "smooth",
    });
  }
};

const handleScroll = () => {
  const sections = [
    "contexte",
    "role",
    "organisation",
    "technologies",
    "fonctionnalites",
    "defis",
    "securite",
    "avancement",
    "apprentissages",
    "comp√©tences",
    "ue1",
    "ue4",
    "ue6",
    "transverse",
  ];

  for (let i = sections.length - 1; i >= 0; i--) {
    const element = document.getElementById(sections[i]);
    if (element) {
      const rect = element.getBoundingClientRect();
      if (rect.top <= 200) {
        activeSection.value = sections[i];
        break;
      }
    }
  }
};

onMounted(() => {
  // Smooth scroll pour tous les navigateurs
  document.documentElement.style.scrollBehavior = "smooth";

  window.addEventListener("scroll", handleScroll);
  handleScroll(); // Initial check
});

onUnmounted(() => {
  window.removeEventListener("scroll", handleScroll);
});
</script>

<style scoped>
/* Scrollspy Navigation */
.scrollspy-nav {
  position: fixed;
  top: 50%;
  right: 2rem;
  transform: translateY(-50%);
  z-index: 1000;
  background: rgba(26, 26, 26, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(144, 168, 255, 0.2);
  border-radius: 12px;
  padding: 1rem;
  max-height: 80vh;
  overflow-y: auto;
}

.nav-list {
  list-style: none;
  padding: 0;
  margin: 0;
  min-width: 200px;
}

.nav-list li {
  margin-bottom: 0.5rem;
}

.nav-list a {
  display: block;
  color: #888;
  text-decoration: none;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  font-size: 0.9rem;
  transition: all 0.3s ease;
  border-left: 2px solid transparent;
  cursor: pointer;
}

.nav-list a:hover {
  color: #90a8ff;
  background: rgba(144, 168, 255, 0.1);
  border-left-color: #90a8ff;
}

.nav-list a.active {
  color: #90a8ff;
  background: rgba(144, 168, 255, 0.15);
  border-left-color: #90a8ff;
  font-weight: 600;
}

.scrollspy-nav::-webkit-scrollbar {
  width: 4px;
}

.scrollspy-nav::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
}

.scrollspy-nav::-webkit-scrollbar-thumb {
  background: #90a8ff;
  border-radius: 2px;
}

.stage-view {
  margin-top: 6rem;
  width: 600px;
  text-align: justify;
  line-height: 1.6;
}

.section {
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid #333;
}

.section:last-child {
  border-bottom: none;
}

.stage-view h2 {
  margin-bottom: 1.5rem;
  color: #90a8ff;
  font-size: 1.5rem;
}

.stage-view h3 {
  margin-bottom: 1rem;
  color: #b8c5ff;
  font-size: 1.2rem;
}

.stage-view p {
  margin-bottom: 1rem;
}

.stage-view li {
  margin-bottom: 0.5rem;
}

strong {
  color: #90a8ff;
}

.special-character {
  color: #ff6b6b;
  font-weight: bold;
  background-color: #4d3a3a;
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
}

.logo {
  width: 200px;
  height: auto;
  margin: 1rem auto;
  display: block;
}

img {
  width: 100%;
  height: auto;
  margin: 1rem 0;
  border-radius: 8px;
}

.legend {
  text-align: center;
  font-style: italic;
  color: #888;
  margin-bottom: 1rem;
}

.objectives {
  background: rgba(144, 168, 255, 0.1);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
}

.constraint {
  background: rgba(255, 193, 144, 0.1);
  padding: 1rem;
  border-left: 4px solid #ffc190;
  margin-top: 1rem;
}

.timeline {
  background: rgba(144, 168, 255, 0.05);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
}

.timeline-item {
  display: flex;
  margin-bottom: 1rem;
  align-items: center;
}

.week {
  background: #90a8ff;
  color: #1a1a1a;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-weight: bold;
  min-width: 120px;
  text-align: center;
  margin-right: 1rem;
}

.task {
  flex: 1;
}

.tech-stack {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 1rem 0;
}

.tech-category {
  background: rgba(144, 168, 255, 0.05);
  padding: 1.5rem;
  border-radius: 8px;
}

.tech-category h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

.features-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 1rem 0;
}

.feature-category {
  background: rgba(144, 168, 255, 0.05);
  padding: 1.5rem;
  border-radius: 8px;
}

.feature-category h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

.highlight {
  background: rgba(144, 168, 255, 0.1);
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #90a8ff;
  margin: 1rem 0;
}

.progress {
  margin: 1.5rem 0;
}

.progress-bar {
  background: rgba(255, 255, 255, 0.1);
  height: 20px;
  border-radius: 10px;
  overflow: hidden;
  margin-top: 0.5rem;
}

.progress-fill {
  background: linear-gradient(90deg, #90a8ff, #b8c5ff);
  height: 100%;
  border-radius: 10px;
  transition: width 0.3s ease;
}

.challenge {
  background: rgba(255, 193, 144, 0.1);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
  border-left: 4px solid #ffc190;
}

.challenge h3 {
  color: #ffc190;
  margin-bottom: 1rem;
}

.security-method {
  margin: 2rem 0;
}

.security-method h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

.status,
.remaining-tasks,
.proposals {
  background: rgba(144, 168, 255, 0.05);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
}

.status h3,
.remaining-tasks h3,
.proposals h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

.learnings {
  background: rgba(144, 168, 255, 0.05);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
}

.learnings h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

.reflection {
  background: rgba(144, 168, 255, 0.1);
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #90a8ff;
  margin: 1rem 0;
}

.reflection h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

/* Nouveaux styles pour la section comp√©tences */
.official-link {
  color: #90a8ff;
  text-decoration: underline;
  transition: color 0.3s ease;
}

.official-link:hover {
  color: #b8c5ff;
}

.competences-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 2rem 0;
}

.competence-card {
  border-radius: 12px;
  padding: 1.5rem;
  border-left: 4px solid;
  background: rgba(144, 168, 255, 0.05);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.competence-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(144, 168, 255, 0.15);
}

.competence-card.ue1 {
  border-left-color: #ff6b6b;
  background: rgba(255, 107, 107, 0.05);
}

.competence-card.ue4 {
  border-left-color: #4ecdc4;
  background: rgba(78, 205, 196, 0.05);
}

.competence-card.ue6 {
  border-left-color: #45b7d1;
  background: rgba(69, 183, 209, 0.05);
}

.competence-card.transverse {
  border-left-color: #f9ca24;
  background: rgba(249, 202, 36, 0.05);
}

.ue1-link,
.ue4-link,
.transverse-link {
  cursor: pointer;
  text-decoration: underline;
  transition: color 0.3s ease;
}

.competence-header {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
}

.ue-badge {
  background: linear-gradient(45deg, #90a8ff, #b8c5ff);
  color: #1a1a1a;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: bold;
  margin-right: 1rem;
}

.ue-badge.multi {
  background: linear-gradient(45deg, #f9ca24, #f0932b);
}

.competence-header h3 {
  color: #90a8ff;
  margin: 0;
  font-size: 1.1rem;
}

.competence-title {
  font-weight: 600;
  font-size: 1.1rem;
  color: #fff;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid rgba(144, 168, 255, 0.2);
}

.competence-details {
  color: #ccc;
}

.competence-details p {
  margin-bottom: 0.5rem;
}

.competence-details strong {
  color: #90a8ff;
}

.competence-details ul {
  margin-top: 0.5rem;
  padding-left: 1.2rem;
}

.competence-details li {
  margin-bottom: 0.3rem;
  font-size: 0.95rem;
}

.competences-synthesis {
  background: rgba(144, 168, 255, 0.1);
  padding: 2rem;
  border-radius: 12px;
  border-left: 4px solid #90a8ff;
  margin-top: 2rem;
}

.competences-synthesis h3 {
  color: #90a8ff;
  margin-bottom: 1rem;
}

/* Responsive */
@media (max-width: 768px) {
  .scrollspy-nav {
    display: none;
  }

  .stage-view {
    width: 100%;
    padding: 0 1rem;
  }

  .tech-stack,
  .features-grid,
  .competences-grid {
    grid-template-columns: 1fr;
  }

  .timeline-item {
    flex-direction: column;
    align-items: flex-start;
  }

  .week {
    margin-bottom: 0.5rem;
    margin-right: 0;
  }
}
</style>
